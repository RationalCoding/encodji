var lz = require('lz-string')

var emoji = ['😄', '😆', '😊', '😃', '☺️', '😏', '😍', '😘', '😳', '😌', '😁', '😉', '👅', '😒', '😅', '😓', '😩', '😔', '😞', '😖', '😨', '😰', '😣', '😢', '😭', '😂', '😲', '😱', '😫', '😠', '😡', '😤', '😪', '😋', '😷', '😎', '😵', '👿', '😈', '😐', '😶', '😇', '👽', '💛', '💙', '💜', '❤️', '💚', '💔', '💓', '💗', '💕', '💞', '💘', '⭐️', '🌟', '💫', '💥', '💢', '❗️', '💤', '💨', '💦', '🎶', '🎵', '🔥', '👍', '👎', '👌', '👊', '✌️', '👋', '👐', '☝️', '👇', '👈', '👉', '🙌', '🙏', '👆', '👏', '💪', '🤘', '🚶', '🏃', '👫', '👪', '👬', '👭', '💃', '👯', '🙆', '🙅', '💁', '👰', '🙎', '🙍', '🙇', '💑', '💆', '💇', '💅', '👦', '👧', '👩', '👨', '👶', '👵', '👴', '👱', '👲', '👳', '👷', '👮', '👼', '👸', '😺', '😸', '😻', '😽', '😼', '🙀', '😿', '😹', '😾', '👹', '👺', '🙈', '🙉', '🙊', '💂', '💀', '🐾', '👄', '💋', '💧', '👂', '👀', '👃', '💌', '👤', '👥', '💬', '💭', '☀️', '☔️', '☁️', '❄️', '⛄️', '⚡️', '🌀', '🌁', '🌊', '🐱', '🐶', '🐭', '🐹', '🐰', '🐺', '🐸', '🐯', '🐨', '🐻', '🐷', '🐽', '🐮', '🐗', '🐵', '🐒', '🐴', '🐎', '🐫', '🐑', '🐘', '🐼', '🐍', '🐦', '🐤', '🐥', '🐣', '🐔', '🐧', '🐢', '🐛', '🐝', '🐜', '🐞', '🐌', '🐙', '🐠', '🐟', '🐳', '🐋', '🐬', '🐄', '🐏', '🐀', '🐃', '🐅', '🐇', '🐉', '🐐', '🐓', '🐕', '🐖', '🐁', '🐂', '🐲', '🐡', '🐊', '🐪', '🐆', '🐈', '🐩', '💐', '🌸', '🌷', '🍀', '🌹', '🌻', '🌺', '🍁', '🍃', '🍂', '🌿', '🍄', '🌵', '🌴', '🌲', '🌳', '🌰', '🌱', '🌼', '🌾', '🐚', '🌐', '🌞', '🌝', '🌚', '🌑', '🌒', '🌓', '🌔', '🌕', '🌖', '🌗', '🌘', '🌜', '🌛', '🌍', '🌎', '🌏', '🌋', '🌌', '⛅️', '🎍']

var Encodji = {}

Encodji.encode = function (obj) {
  var base64 = lz.compressToBase64(JSON.stringify(obj))
  return base64.split('').map(function (a) {
    return emoji[a.charCodeAt(0)]
  }).join('')
}

Encodji.decode = function (str) {
  var arr = str.split('')
  var base64 = arr.map(function (a, index) {
    if (index % 2) {
      return ''
    } else {
      return String.fromCharCode(emoji.indexOf(arr[index] + arr[index + 1]))
    }
  }).join('')

  return JSON.parse(lz.decompressFromBase64(base64))
}

module.exports = Encodji
